{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"factoryName":{"type":"string","metadata":"Data Factory name"},"PostgreSqlForVM":{"type":"string"},"AzureSqlDatabaseForVM":{"type":"string"}},"variables":{"factoryId":"[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"},"resources":[{"name":"[concat(parameters('factoryName'), '/PostgreSQLtoAzureSQL2')]","type":"Microsoft.DataFactory/factories/pipelines","apiVersion":"2018-06-01","properties":{"activities":[{"name":"efsb_jobs","type":"Copy","dependsOn":[],"policy":{"timeout":"7.00:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[{"name":"Source","value":"public.efsb_jobs"},{"name":"Destination","value":"dbo.efsb_jobs"}],"typeProperties":{"source":{"type":"PostgreSqlSource"},"sink":{"type":"AzureSqlSink","sqlWriterStoredProcedureName":"[[dbo].[uspEfsbJobsSyncADS]","sqlWriterTableType":"[[dbo].[efsbjobtype]","storedProcedureTableTypeParameterName":"efsbjobtype"},"enableStaging":false,"translator":{"type":"TabularTranslator","mappings":[{"source":{"name":"identifier","type":"Int64"},"sink":{"name":"identifier","type":"Int64"}},{"source":{"name":"reference_number","type":"String"},"sink":{"name":"reference_number","type":"String"}},{"source":{"name":"summary","type":"String"},"sink":{"name":"summary","type":"String"}},{"source":{"name":"description","type":"String"},"sink":{"name":"description","type":"String"}},{"source":{"name":"raised_condition","type":"String"},"sink":{"name":"raised_condition","type":"String"}},{"source":{"name":"external_reference","type":"String"},"sink":{"name":"external_reference","type":"String"}},{"source":{"name":"status","type":"String"},"sink":{"name":"status","type":"String"}},{"source":{"name":"creation_time","type":"DateTime"},"sink":{"name":"creation_time","type":"DateTime"}},{"source":{"name":"tolerance","type":"Int32"},"sink":{"name":"tolerance","type":"Int32"}},{"source":{"name":"due_time","type":"DateTime"},"sink":{"name":"due_time","type":"DateTime"}},{"source":{"name":"due_time_with_tollerance","type":"DateTime"},"sink":{"name":"due_time_with_tollerance","type":"DateTime"}},{"source":{"name":"nearing_breach","type":"DateTime"},"sink":{"name":"nearing_breach","type":"DateTime"}},{"source":{"name":"response_time","type":"DateTime"},"sink":{"name":"response_time","type":"DateTime"}},{"source":{"name":"response_expiration","type":"DateTime"},"sink":{"name":"response_expiration","type":"DateTime"}},{"source":{"name":"Response SLA","type":"String"},"sink":{"name":"Response_SLA","type":"String"}},{"source":{"name":"completion_expiration","type":"DateTime"},"sink":{"name":"completion_expiration","type":"DateTime"}},{"source":{"name":"completed_time","type":"DateTime"},"sink":{"name":"completed_time","type":"DateTime"}},{"source":{"name":"Completion SLA","type":"String"},"sink":{"name":"Completion_SLA","type":"String"}},{"source":{"name":"job_state","type":"String"},"sink":{"name":"job_state","type":"String"}},{"source":{"name":"Created/Due","type":"DateTime"},"sink":{"name":"Created_Due","type":"DateTime"}},{"source":{"name":"next_action","type":"String"},"sink":{"name":"next_action","type":"String"}},{"source":{"name":"creator","type":"String"},"sink":{"name":"creator","type":"String"}},{"source":{"name":"assignee","type":"String"},"sink":{"name":"assignee","type":"String"}},{"source":{"name":"supplier_name","type":"String"},"sink":{"name":"supplier_name","type":"String"}},{"source":{"name":"supplier_ext_reference","type":"String"},"sink":{"name":"supplier_ext_reference","type":"String"}},{"source":{"name":"segment","type":"String"},"sink":{"name":"segment","type":"String"}},{"source":{"name":"account","type":"Int64"},"sink":{"name":"account","type":"Int32"}},{"source":{"name":"property","type":"Int64"},"sink":{"name":"property","type":"Int32"}},{"source":{"name":"product_bundle_order","type":"Int64"},"sink":{"name":"product_bundle_order","type":"Int32"}},{"source":{"name":"Urbanise URL","type":"String"},"sink":{"name":"Urbanise_URL","type":"String"}},{"source":{"name":"job_template","type":"Int64"},"sink":{"name":"job_template","type":"String"}},{"source":{"name":"Priority","type":"String"},"sink":{"name":"Priority","type":"String"}},{"source":{"name":"last_changed","type":"DateTime"},"sink":{"name":"last_changed","type":"DateTime"}},{"source":{"name":"quotation","type":"Int64"},"sink":{"name":"quotation","type":"Int32"}},{"source":{"name":"tenant","type":"String"},"sink":{"name":"tenant","type":"String"}}]}},"inputs":[{"referenceName":"public_efsb_jobs","type":"DatasetReference","parameters":{}}],"outputs":[{"referenceName":"dbo_efsb_jobs","type":"DatasetReference","parameters":{}}]}],"policy":{"elapsedTimeMetric":{},"cancelAfter":{}},"annotations":[],"lastPublishTime":"2022-10-21T01:55:19Z"},"dependsOn":["[concat(variables('factoryId'), '/datasets/public_efsb_jobs')]","[concat(variables('factoryId'), '/datasets/dbo_efsb_jobs')]"]},{"name":"[concat(parameters('factoryName'), '/public_efsb_jobs')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('PostgreSqlForVM')]","type":"LinkedServiceReference"},"annotations":[],"type":"PostgreSqlTable","schema":[],"typeProperties":{"schema":"public","table":"efsb_jobs"}},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/dbo_efsb_jobs')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabaseForVM')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"identifier","type":"bigint","precision":19,"scale":0},{"name":"reference_number","type":"varchar","precision":0,"scale":0},{"name":"summary","type":"varchar","precision":0,"scale":0},{"name":"description","type":"varchar","precision":0,"scale":0},{"name":"raised_condition","type":"varchar","precision":0,"scale":0},{"name":"external_reference","type":"varchar","precision":0,"scale":0},{"name":"status","type":"varchar","precision":0,"scale":0},{"name":"creation_time","type":"datetime","precision":23,"scale":3},{"name":"tolerance","type":"int","precision":10,"scale":0},{"name":"due_time","type":"datetime","precision":23,"scale":3},{"name":"due_time_with_tollerance","type":"datetime","precision":23,"scale":3},{"name":"nearing_breach","type":"datetime","precision":23,"scale":3},{"name":"response_time","type":"datetime","precision":23,"scale":3},{"name":"response_expiration","type":"datetime","precision":23,"scale":3},{"name":"Response_SLA","type":"varchar","precision":0,"scale":0},{"name":"completion_expiration","type":"datetime","precision":23,"scale":3},{"name":"completed_time","type":"datetime","precision":23,"scale":3},{"name":"Completion_SLA","type":"varchar","precision":0,"scale":0},{"name":"job_state","type":"varchar","precision":0,"scale":0},{"name":"Created_Due","type":"datetime","precision":23,"scale":3},{"name":"next_action","type":"varchar","precision":0,"scale":0},{"name":"creator","type":"varchar","precision":0,"scale":0},{"name":"assignee","type":"varchar","precision":0,"scale":0},{"name":"supplier_name","type":"varchar","precision":0,"scale":0},{"name":"supplier_ext_reference","type":"varchar","precision":0,"scale":0},{"name":"segment","type":"varchar","precision":0,"scale":0},{"name":"account","type":"int","precision":10,"scale":0},{"name":"property","type":"int","precision":10,"scale":0},{"name":"product_bundle_order","type":"int","precision":10,"scale":0},{"name":"Urbanise_URL","type":"varchar","precision":0,"scale":0},{"name":"job_template","type":"varchar","precision":0,"scale":0},{"name":"Priority","type":"varchar","precision":0,"scale":0},{"name":"last_changed","type":"datetime","precision":23,"scale":3},{"name":"quotation","type":"int","precision":10,"scale":0},{"name":"tenant","type":"varchar","precision":0,"scale":0}],"typeProperties":{"schema":"dbo","table":"efsb_jobs"}},"dependsOn":[]}]}